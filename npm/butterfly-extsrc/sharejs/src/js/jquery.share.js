(c=>{c.fn.share=function(e){var t=c(document.head),t={url:location.href,site_url:location.origin,source:t.find("[name=site], [name=Site]").attr("content")||document.title,title:t.find("[name=title], [name=Title]").attr("content")||document.title,description:t.find("[name=description], [name=Description]").attr("content")||"",image:c("img:first").prop("src")||"",imageSelector:void 0,weiboKey:"",wechatQrcodeTitle:"微信扫一扫：分享",wechatQrcodeHelper:"<p>微信里点“发现”，扫一下</p><p>二维码便可将本文分享至朋友圈。</p>",wechatQrcodeSize:100,mobileSites:[],sites:["weibo","qq","wechat","tencent","douban","qzone","linkedin","diandian","facebook","twitter","google"],disabled:[],initialized:!1},n=c.extend({},t,e),o={qzone:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url={{URL}}&title={{TITLE}}&desc={{DESCRIPTION}}&summary={{SUMMARY}}&site={{SOURCE}}&pics={{IMAGE}}",qq:"http://connect.qq.com/widget/shareqq/index.html?url={{URL}}&title={{TITLE}}&source={{SOURCE}}&desc={{DESCRIPTION}}&pics={{IMAGE}}",tencent:"http://share.v.t.qq.com/index.php?c=share&a=index&title={{TITLE}}&url={{URL}}&pic={{IMAGE}}",weibo:"https://service.weibo.com/share/share.php?url={{URL}}&title={{TITLE}}&pic={{IMAGE}}&appkey={{WEIBOKEY}}",wechat:"javascript:;",douban:"http://shuo.douban.com/!service/share?href={{URL}}&name={{TITLE}}&text={{DESCRIPTION}}&image={{IMAGE}}&starid=0&aid=0&style=11",diandian:"http://www.diandian.com/share?lo={{URL}}&ti={{TITLE}}&type=link",linkedin:"http://www.linkedin.com/shareArticle?mini=true&ro=true&title={{TITLE}}&url={{URL}}&summary={{SUMMARY}}&source={{SOURCE}}&armin=armin",facebook:"https://www.facebook.com/sharer/sharer.php?u={{URL}}&title={{TITLE}}&description={{DESCRIPTION}}&caption={{SUBHEAD}}&link={{URL}}&picture={{IMAGE}}",twitter:"https://twitter.com/intent/tweet?text={{TITLE}}&url={{URL}}&via={{SITE_URL}}",google:"https://plus.google.com/share?url={{URL}}"},s={qzone:"QQ空间",qq:"QQ",tencent:"腾讯微博",weibo:"微博",wechat:"微信",douban:"豆瓣",diandian:"点点",linkedin:"LinkedIn",facebook:"Facebook",twitter:"Twitter",google:"Google"};this.each(function(){if(c(this).data("initialized"))return!0;var a,r,e=c.extend({},n,c(this).data()),t=(e.imageSelector&&(e.image=c(e.imageSelector).map(function(){return c(this).prop("src")}).get().join("||")),c(this).addClass("share-component social-share")),i=(a=t,i=(e=>{0===e.mobileSites.length&&e.sites.length&&(e.mobileSites=e.sites);var i=(c(window).width()<=768?e.mobileSites:e.sites.length?e.sites:[]).slice(0),e=e.disabled;return"string"==typeof i&&(i=i.split(/\s*,\s*/)),"string"==typeof e&&(e=e.split(/\s*,\s*/)),/MicroMessenger/i.test(navigator.userAgent)&&e.push("wechat"),e.length&&c.each(e,function(e,t){t=c.inArray(t,i);-1!==t&&i.splice(t,1)}),i})(r=e),"prepend"==r.mode&&i.reverse(),i.length&&c.each(i,function(e,t){var i=((e,t)=>{var i,n,a=o[e];for(i in t.summary=t.description,t)t.hasOwnProperty(i)&&(n=e+i.replace(/^[a-z]/,function(e){return e.toUpperCase()}),n=encodeURIComponent(void 0===t[n]?t[i]:t[n]),a=a.replace(new RegExp("{{"+i.toUpperCase()+"}}","g"),n));return a})(t,r),n=r.initialized?a.find(".icon-"+t):c('<a class="social-share-icon icon-'+t+'"></a>');if(!n.length)return!0;n.prop("aria-label","分享到 "+s[t]),n.prop("href",i),"wechat"===t?n.prop("tabindex",-1):n.prop("target","_blank"),r.initialized||("prepend"==r.mode?a.prepend(n):a.append(n))}),t),t=e;(i=i.find("a.icon-wechat")).length&&(i.append('<div class="wechat-qrcode"><h4>'+t.wechatQrcodeTitle+'</h4><div class="qrcode"></div><div class="help">'+t.wechatQrcodeHelper+"</div></div>"),i.find(".qrcode").qrcode({render:"image",size:t.wechatQrcodeSize,text:t.url}),i.offset().top<100)&&i.find(".wechat-qrcode").addClass("bottom"),c(this).data("initialized",!0)})},c(function(){c(".share-component,.social-share").share()})})(jQuery);